# 백준 문제 풀이

## bj 28071. 승형이의 사탕 사기(2025-09-09)

## 문제 유형

1. Dynamic Programming
2. Knapsack Problem

## 문제 설명

승형이는 집에 있는 K명의 동생들을 위해 사탕 가게에서 사탕을 사 가려고 한다. 사탕 가게에는 N종류의 사탕 상자가 있고 승형이는 최대 M개의 사탕 상자를 가져갈 수 있다. 승형이가 들른 사탕 가게는 정말 커서 각 종류의 사탕 상자가 무한히 있다.

승형이의 동생들은 매우 탐욕스러워서 만약 승형이가 사 간 총 사탕의 개수가 K로 나누어떨어지지 않으면 동생들은 사탕을 한 개라도 더 갖기 위하여 서로 싸운다. 승형이를 위해서 최대로 가져갈 수 있는 사탕의 개수를 구해주자!

## 입력

첫째 줄에 N, M, K가 주어진다. (1 <= N, M, K <= 300)

둘째 줄에 각각의 사탕 상자에 담겨있는 사탕의 개수 a_1, a_2, ..., a_N가 주어진다. (1 <= a_i <= 300)

입력으로 주어지는 모든 수는 정수이다.

## 출력

동생들이 싸우지 않는 최대 사탕의 개수를 출력한다.

사탕을 하나도 가져갈 수 없으면 0을 출력한다.

## 문제풀이

전형적인 Knapsack 문제이다. 단, 각 경우의 요소 값을 0개 이상 선택할 수 있음을 고려해야 한다.

dp를 (M+1) X (K)로 구성할 경우, dp[i][j]는 총 i개의 사탕 박스를 선택했을 때, 사탕의 합을 K로 나눈 값이 j일 경우 최대 사탕 개수를 의미한다.

사탕 박스를 1개 선택한 경우는 각 사탕의 종류 별로 한 개 선택했을 때 각 나머지에 대해 최대값을 갱신함으로써 시작한다.

사탕 박스를 i개 선택했을 경우, 각 사탕 종류 별(j)로 얻을 수 있는 사탕의 개수를 파악한다(n = arr[j])

이 때, 0 ~ K-1 사이의 k에 대해, k - arr[j]는 직전 사탕 박스 에 대한 값을 의미한다. 이 값에 K를 더하면서 처음으로 0 ~ K-1 사이의 값이 될 경우, 해당 dp값(dp[i-1](k-arr[j] + X \* K) % K])의 값이 0이 아닐 경우(이미 계산이 된 경우), 현재 dp값을 최대값으로 갱신해주면 된다.

선택한 사탕 박스 개수 별로(i = 1 ~ M) 나머지가 0인 경우의 최대값이 곧 정답이 된다.

출제자는 bfs를 활용해서 풀어보라고 했던데,, 그 방법은 떠오르지 않았다 ㅠ knapsack에 bfs를 적용하는 방법이 있나?

## 문제풀이 코드

```python
# 백준 28071
import sys

# N : 사탕 종류 수(1 <= N <= 300)
# K : 동생들의 수(1 <= K <= 300)
# M : 승형이가 가져갈 수 있는 사탕 상자의 최대 개수(1 <= M <= 300)
# arr : 사탕 상자 별 사탕 개수(1 <= arr[i] <= 300)
def solution(N, M, K, arr):
    dp = [[0] * K for _ in range(M+1)]
    for i in range(N):
        n = arr[i]
        dp[1][n % K] = max(dp[1][n % K], n)
    for i in range(2, M+1):
        for j in range(N):
            for k in range(K):
                n = k-arr[j]
                while n < K:
                    n += K
                if dp[i-1][n%K] != 0:
                    dp[i][k] = max(dp[i][k], dp[i-1][n%K] + arr[j])
    result = 0
    for i in range(1, M+1):
        result = max(result, dp[i][0])
    return result

N, M, K = map(int, input().split())
arr = list(map(int, input().split()))
print(solution(N, M, K, arr))
```

```java


```
