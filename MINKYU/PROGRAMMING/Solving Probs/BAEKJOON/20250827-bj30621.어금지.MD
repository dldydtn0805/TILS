# 백준 문제 풀이

## bj 30621. 어? 금지(2025-08-27)

## 문제 유형

1. Dynamic Programming
2. Binary Search

## 문제 설명

'어?'

팀 대회 중 주변에서 '어?'라는 말이 들리면 마음이 혼란해진다. 그렇다고 해서 '어?'를 남발하면 혼란보다는 짜증이 앞서게 된다. 이를 잘 알고 있는 성우는 적당한 선을 지키면서 대회장에 최대한 큰 혼란을 주려고 한다.

대회는 시각
$0$에 시작한다.
성우가 '어?'를 외칠 수 있는 시각은
$N$개가 있고,
$i$번째 시각은
$t_i$다.
$(1 \leq i \leq N)$ 
만약 성우가 시각
$t_i$에 '어?'를 외치려 한다면, 성우는 시각
$(t_i - b_i)$부터 지금까지 '어?'를 외친 적이 없어야 한다.
성우가 정확히 시각
$(t_i - b_i)$에 '어?'를 외쳤더라도 시각
$t_i$에 '어?'를 외칠 수 없다.
성우가 시각
$t_i$에 '어?'를 외치면 대회장에
$c_i$만큼의 혼란이 가해진다. 최종 혼란은 대회장에 가해진 혼란의 합이다.

성우는 대회장에 줄 수 있는 최종 혼란의 최댓값이 궁금해졌다. 성우를 위해 이를 구해주자.

## 입력

첫 번째 줄에 성우가 '어?'를 외칠 수 있는 시각의 개수 N이 주어진다. (1 <= N <= 100,000)

두 번째 줄에 정수 t*1, t_2, ..., t_N이 공백을 사이에 두고 주어진다. (1 <= t_i <= 10^9, t*{i-1} < t_i)

세 번째 줄에 정수 b_1, b_2, ..., b_N이 공백을 사이에 두고 주어진다. (1 <= b_i <= 10^9, b_i <= t_i)

네 번째 줄에 정수 c_1, c_2, ..., c_N이 공백을 사이에 두고 주어진다. (1 <= c_i <= 10^9)

## 출력

첫 번째 줄에 성우가 대회장에 줄 수 있는 최종 혼란의 최댓값을 출력한다.

## 문제풀이

주어진 ti들의 값의 범위가 큰 dp 문제이다. 그 말은 즉, binary search를 활용하여 각 t, d에 대해 t-d보다 작은 값을 가진 인덱스 중, 가장 큰 인덱스를 구해야 하는 문제였다.

이를 활용하여 주어진 t, d, c에 대해 t-d를 활용하여 앞선 인덱스를 찾고, 해당 인덱스(idx = binary_search(t-d))에 저장된 값에 c를 더한 값과 비교하면 된다. 만약, 구한 idx가 범위를 벗어난 경우, 해당 번째의 어?를 외치는 것을 직전에 외친 경우와 비교하면 된다.

범위가 크다 -> 바이너리 서치!

## 문제풀이 코드

```python
# 백준 30621
import sys

# N : 어?를 외칠 수 있는 시각의 개수(1 <= N <= 100000)
# times[i] : i번 어?를 외칠 수 있는 시각
# before[i] : i번 어?를 외치기 위해 기다려야 하는 시간
# crazy[i] : i번 어?를 외칠 경우 얻는 혼란
def solution(N, times, before, crazy):
    dp = [0] * (N+1)

    def binary_search(val):
        l = 0
        r = N
        while l <= r:
            m = (l+r)//2
            if times[m] < val:
                l = m + 1
            else:
                r = m - 1
        return l - 1

    for i in range(1, N+1):
        dp[i] = dp[i-1]
        t = times[i]
        b = before[i]
        c = crazy[i]

        # i번 기준 가장 마지막에 어?를 외쳐도 되는 경우의 인덱스
        j = binary_search(t-b)
        if j < 0:
            dp[i] = max(dp[i], c)
        else:
            dp[i] = max(dp[i], dp[j] + c)
    # print(dp)
    return dp[N]

N = int(input())
times = [0] + list(map(int, input().split()))
before = [0] + list(map(int, input().split()))
crazy = [0] + list(map(int, input().split()))
print(solution(N, times, before, crazy))
```

```java


```
