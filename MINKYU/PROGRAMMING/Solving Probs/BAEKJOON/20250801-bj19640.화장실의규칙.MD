# 백준 문제 풀이

## bj 19640. 화장실의 규칙(2025-08-01)

## 문제 유형

1. Deque
2. Proirity Queue
3. Simulation

## 문제 설명

데카는 회사의 화장실을 이용하려고 했다. 하지만 수도 시설 고장으로 회사 내의 모든 화장실 사용이 금지됐고, 사원들은 단 하나의 임시 화장실을 이용해야 했다.

임시 화장실의 앞에 데카를 포함한 N명의 사원이 대기하고 있다. 데카는 N명의 줄에서 K + 1번째로 줄을 섰다. 즉, 데카보다 먼저 도착한 사람이 K명이 있다. 줄이 길어지자 사장은 M개의 줄로 나눠서 대기하라 하였다.

N명의 사원은 순서대로 M개의 줄로 나눠 섰다. 기존 줄의 1번째 사원은 1번째 줄에, 2번째 사원은 2번째 줄에, ... M번째 사원은 M번째 줄에, 그리고 M + 1번째 사원은 1번째 줄의 뒤에 서는 방식이다.

M개의 줄로 나눠 선 것을 본 사장은 매우 흡족해하며 자리를 떠났다.

M개의 줄의 사원들은 암묵적으로 다음의 규칙에 따라 화장실을 이용하기로 하였다.

선두란, 어떤 줄에서 가장 먼저 와서, 가장 앞에 선 사람을 말한다.
M개의 줄의 선두 중 근무 일수 Di가 가장 높은 선두가 화장실을 이용한다.
M개의 줄의 선두 중 근무 일수 Di가 가장 높은 선두가 둘 이상인 경우, 해당 선두들 중 화장실이 급한 정도 Hi가 가장 높은 선두가 화장실을 이용한다.
M개의 줄의 선두 중 근무 일수 Di가 가장 높은 선두가 둘 이상이며, 해당 선두들의 화장실이 급한 정도 Hi도 모두 같다면, 해당 선두 중 줄의 번호가 가장 낮은 줄에 선 선두가 화장실을 이용한다.
과연 몇 명의 사원이 화장실을 이용하고 나서야 데카의 차례가 올까? 매우 초조해지기 시작한 데카를 대신해 계산해주자.

## 입력

첫 번째 줄에는 임시 화장실에 대기하고 있는 사원의 수 N (1 ≤ N ≤ 105), 사장이 지시한 새로운 줄의 수 M (2 ≤ M ≤ 105), 데카가 화장실에 도착했을 때 자신의 앞에 서 있던 사원의 수 K (0 ≤ K ≤ N − 1)가 빈칸을 사이에 두고 주어진다.

두 번째 줄부터 각 N개의 줄에 임시 화장실에 i번째로 줄을 섰던 사원의 근무 일수 Di (0 ≤ Di ≤ 36,500), 화장실이 급한 정도를 나타내는 정수 Hi (0 ≤ Hi ≤ 108)가 가장 먼저 도착한 사원부터 빈칸을 사이에 두고 주어진다.

## 출력

데카가 화장실을 이용하기까지 몇 명의 사원이 화장실을 이용할 것인지 출력한다.

## 문제풀이

우선순위 큐를 활용한 구현 문제이다. 각 화장실 대기방에 사람들을 순서대로 집어넣고, 각 대기방 별로 가장 앞에 있는 사람들 중, 주어진 조건에 만족하는 사람을 먼저 화장실에 보내야 한다.

각 화장실 대기열(deque())의 선두에 있는 사람들을 모아서 우선순위 큐에 넣는다. 이를 통해 쉽게 현재 화장실에 들어가는 사람에 대한 정보를 얻을 수 있다.

해당 사람과 같은 대기열에 있던 사람 중, 가장 앞에 있던 사람이 다시 우선순위 큐에 들어오게 하면 완성이다.

처음에는 우선순위 큐 하나로 모든 것을 해결하려 해서 시간초과가 났다. deque를 이용하면 쉽게 가능했다!

## 문제풀이 코드

```python
# 백준 19640
import sys
from collections import deque
import heapq

def solution(N, M, K, arr):
    toilets = [deque() for _ in range(M)]
    for n in range(N):
        d, h = arr[n]
        toilets[n%M].append((-d, -h, n%M, n))

    pq = []
    for i in range(M):
        if toilets[i]:
            heapq.heappush(pq, toilets[i][0])
    cnt = 0
    while True:
        # r
        d, h, i, k = heapq.heappop(pq)
        toilets[i].popleft()
        if k == K:
            return cnt
        cnt += 1
        if toilets[i]:
            heapq.heappush(pq, toilets[i][0])
    return cnt

N, M, K = map(int, input().split())
arr = [list(map(int, input().split())) for _ in range(N)]

print(solution(N, M, K, arr))
```

```java


```
