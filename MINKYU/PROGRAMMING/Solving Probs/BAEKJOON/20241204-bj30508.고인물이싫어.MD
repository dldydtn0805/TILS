# 백준 문제 풀이

## bj 30508. 고인물이 싫어(2024-12-04)

## 문제 설명

비 오는 날 세종이는 부모님의 심부름으로 물을 사러 갔다. 횡단보도 앞에서 신호를 기다리던 세종이는 횡단보도가 평평하지 않아 물이 고인 것을 보았다. 횡단보도는 N X M 크기의 직사각형 격자 모양이며, 세종이가 서 있는 쪽 맨 앞의 맨 왼쪽 칸을 1행 1열, 맨 오른쪽 칸을 1행 M열로 부른다.

횡단보도 중 K개의 칸에는 하수구가 있다. 모든 칸은 상하좌우로 인접한 칸 중 높이가 자신보다 낮거나 같은 칸에 하수구나 물이 빠진 칸이 있으면 물이 빠진다. 하수구가 없는 칸 중 물이 빠지지 않은 칸을 물이 고인 칸이라고 한다. A+B를 풀고 받은 새 신발을 더럽히고 싶지 않았던 세종이는 물이 고인 칸을 밟지 않고 횡단보도를 건너려 한다. 세종이의 새 신발은 횡단보도의 연속된 h개의 행과 w개의 열을 덮는 크기의 직사각형 모양이다. 세종이는 횡단보도를 건널 때 항상 신발이 횡단보도의 격자 칸에 꼭 맞게 들어가게 발을 딛으며, 발의 방향을 돌리지 않는다.

횡단보도의 각 칸의 높이가 주어졌을 때, 세종이가 횡단보도에 신발을 더럽히지 않고 한쪽 발을 딛는 방법의 수를 구하는 프로그램을 작성하시오.

## 입력

첫째 줄에 횡단보도의 크기를 나타내는 두 정수 N, M이 공백으로 구분되어 주어진다. (1 <= N, M <= 1,000)
둘째 줄에 세종이의 신발의 길이와 너비를 나타내는 두 정수 h, w가 공백으로 구분되어 주어진다. (1 <= h <= N, 1 <= w <= M)
그다음 N개의 줄에 걸쳐, i+2번째 줄에 M개의 정수 H[i][1], H[i][2],..., H[i][M]이 공백으로 구분되어 주어진다. 이때 H[i][j]는 횡단보도의 i행 j열에 해당하는 칸의 높이를 의미한다. (1 <= H[i][j] <= 100)N+3번째 줄에 하수구의 수를 나타내는 정수 K가 주어진다. (1 <= K <= N X M)
그다음 K개의 줄에 걸쳐 하수구의 위치를 나타내는 두 정수 r, c가 공백으로 구분되어 주어진다. 이는 횡단보도의 r행 c열에 하수구가 있음을 의미한다. 입력으로 주어지는 위치는 중복되지 않는다. (1 <= r <= N, 1 <= c <= M)

## 출력

첫째 줄에 세종이가 횡단보도에 한쪽 발을 딛는 방법의 수를 출력한다.

## 문제풀이

주어진 하수구들의 좌표를 기준으로 bfs를 돌린 후, 누적합으로 변경하여 가능한 경우의 수를 구하는 방식이다.

## 문제풀이 코드

```python
# 백준 30508. 고인물이 싫어
import sys
from collections import deque

def bfs(y, x, N, M, arr, dir):

    que = deque()
    que.append((y, x, arr[y][x]))
    arr[y][x] = 0
    while que:
        i, j, now = que.popleft()

        for di, dj in dir:
            ni = i + di
            nj = j + dj
            if not (1 <= ni < N+1 and 1 <= nj < M+1):
                continue
            if arr[ni][nj] < now:
                continue
            que.append((ni, nj, arr[ni][nj]))
            arr[ni][nj] = 0

def solution():
    # N, M : 횡단보도의 크기(1 <= N, M <= 1000)
    N, M = map(int, input().split())
    # H : 신발의 길이(1 <= H <= N)
    # W : 신발의 너비(1 <= W <= M)
    H, W = map(int, input().split())
    arr = [[0] * (M+1)]
    for i in range(N):
        arr.append([0] + list(map(int, input().split())))
    dir = [(-1, 0), (1, 0), (0, -1), (0, 1)]
    # K : 하수구의 수(1 <= K <= N * M)
    K = int(input())
    for _ in range(K):
        r, c = map(int, input().split())
        if arr[r][c] != 0:
            bfs(r, c, N, M, arr, dir)
    sum_arr = [[0] * (M+1) for _ in range(N+1)]
    for i in range(1, N+1):
        for j in range(1, M+1):
            n = int(arr[i][j] > 0)
            sum_arr[i][j] = sum_arr[i-1][j] + sum_arr[i][j-1] - sum_arr[i-1][j-1] + n
    result = 0
    for i in range(1, N-H+2):
        for j in range(1, M-W+2):
            num = sum_arr[i+H-1][j+W-1] - sum_arr[i+H-1][j-1] - sum_arr[i-1][j+W-1] + sum_arr[i-1][j-1]
            if num == 0:
                result += 1
    print(result)
    '''
    1. 횡단보도 중 K개의 칸에는 하수구가 있다.
    2. 모든 칸은 상하좌우로 인접한 칸 중
    - 높이가 자신보다 낮거나
    - 같은 칸에 하수구나 물이 빠진 칸이 있으면 물이 빠진다.
    3. 하수구가 없는 칸 중 물이 빠지지 않은 칸을 물이 고인 칸이라고 한다.
    4. 세종이는 물이 고인 칸을 밟지 않고 횡단보도를 건너려 한다.
    5. 세종이의 새 신발은
    - 횡단보도의 연속된 h개의 행과
    - w개의 열을 덮는 크기의 직사각형 모양이다.
    6. 세종이는 횡단보도를 건널 때 항상
    - 신발이 횡단보도의 격자 칸에 꼭 맞게 들어가게 발을 딛으며,
    - 발의 방향을 돌리지 않는다.
    '''

solution()
```
